{
  "version": 3,
  "sources": ["../ts/common.ts"],
  "sourcesContent": ["type TcsTyperUser = {\r\n    username: string;\r\n}\r\n\r\nexport type TcsTyperSettings = {\r\n    theme: string,\r\n    sound: string\r\n}\r\n\r\nexport type UserDetails = {\r\n    coach: boolean,\r\n    created_at: string,\r\n    id: number,\r\n    full_name: string,\r\n    password: string,\r\n    tests: Array<object>,\r\n    username: string\r\n}\r\n\r\nexport async function fetchUserDetails(username: string): Promise<UserDetails> {\r\n    let response: UserDetails\r\n    try {\r\n        response = await fetch(\"https://tcs-typer.netlify.app/api/user?username=\" + username).then((resp) => resp.json());\r\n    } catch (e) {\r\n        throw new Error(\"An error occurred while fetching the user details: \" + e)\r\n    }\r\n\r\n\r\n    return response\r\n}\r\n\r\nexport function getUser() {\r\n    try {\r\n        const storedUser = localStorage.getItem(\"TcsTyper_SavedUser\")\r\n\r\n        if (storedUser) {\r\n            return JSON.parse(localStorage.getItem(\"TcsTyper_SavedUser\") || \"\");\r\n        } else {\r\n            // OLD Storage fix:\r\n            const oldStoredUser = localStorage.getItem(\"username\")\r\n            if (oldStoredUser) {\r\n                const newUser = { username: oldStoredUser }\r\n                setUser(newUser)\r\n                window.localStorage.removeItem(\"username\")\r\n                return newUser\r\n            } else {\r\n                return null\r\n            }\r\n        }\r\n    } catch {\r\n        return null\r\n    }\r\n}\r\n\r\nexport function setUser(newUser: TcsTyperUser): void {\r\n    localStorage.setItem(\"TcsTyper_SavedUser\", JSON.stringify(newUser));\r\n}\r\n\r\nexport function getSettings(): TcsTyperSettings {\r\n    const storedSettings = localStorage.getItem(\"TcsTyper_SavedSettings\")\r\n\r\n    useSavedSettings: if (storedSettings) {\r\n        let returning\r\n        try {\r\n            returning = JSON.parse(storedSettings);\r\n        } catch {\r\n            break useSavedSettings\r\n        }\r\n        if (!returning) {\r\n            break useSavedSettings\r\n        }\r\n        if (returning.sound === \"standard-click\") {\r\n            returning.sound = \"default-click\"\r\n        }\r\n        setSettings(returning)\r\n        return returning\r\n    }\r\n\r\n    const defaultSettings = { theme: \"default-theme\", sound: \"default-click\" }\r\n\r\n\r\n    // OLD Storage fix:\r\n    const oldStoredTheme = localStorage.getItem(\"theme\")\r\n    let oldStoredSound = localStorage.getItem(\"sound\")\r\n    if (oldStoredTheme || oldStoredSound) {\r\n        let newSettings = defaultSettings\r\n        if (oldStoredTheme) {\r\n            newSettings = { ...newSettings, theme: oldStoredTheme }\r\n            window.localStorage.removeItem(\"theme\")\r\n        }\r\n        if (oldStoredSound) {\r\n            oldStoredSound = oldStoredSound === \"standard-click\" ? \"default-click\" : oldStoredSound\r\n            newSettings = { ...newSettings, sound: oldStoredSound }\r\n            window.localStorage.removeItem(\"sound\")\r\n        }\r\n        setSettings(newSettings)\r\n        return newSettings\r\n    } else {\r\n        setSettings(defaultSettings)\r\n        return defaultSettings\r\n    }\r\n}\r\n\r\nexport function setSettings(newTheme: TcsTyperSettings): void {\r\n    localStorage.setItem(\"TcsTyper_SavedSettings\", JSON.stringify(newTheme));\r\n}\r\n"],
  "mappings": "6oBAmBA,SAAsBA,EAAiBC,EAAwC,QAAAC,EAAA,sBAC3E,IAAIC,EACJ,GAAI,CACAA,EAAW,MAAM,MAAM,mDAAqDF,CAAQ,EAAE,KAAMG,GAASA,EAAK,KAAK,CAAC,CACpH,OAAS,EAAG,CACR,MAAM,IAAI,MAAM,sDAAwD,CAAC,CAC7E,CAGA,OAAOD,CACX,GAEO,SAASE,GAAU,CACtB,GAAI,CAGA,GAFmB,aAAa,QAAQ,oBAAoB,EAGxD,OAAO,KAAK,MAAM,aAAa,QAAQ,oBAAoB,GAAK,EAAE,EAC/D,CAEH,IAAMC,EAAgB,aAAa,QAAQ,UAAU,EACrD,GAAIA,EAAe,CACf,IAAMC,EAAU,CAAE,SAAUD,CAAc,EAC1C,OAAAE,EAAQD,CAAO,EACf,OAAO,aAAa,WAAW,UAAU,EAClCA,CACX,KACI,QAAO,IAEf,CACJ,OAAQE,EAAA,CACJ,OAAO,IACX,CACJ,CAEO,SAASD,EAAQD,EAA6B,CACjD,aAAa,QAAQ,qBAAsB,KAAK,UAAUA,CAAO,CAAC,CACtE,CAEO,SAASG,GAAgC,CAC5C,IAAMC,EAAiB,aAAa,QAAQ,wBAAwB,EAEpEC,EAAkB,GAAID,EAAgB,CAClC,IAAIE,EACJ,GAAI,CACAA,EAAY,KAAK,MAAMF,CAAc,CACzC,OAAQF,EAAA,CACJ,MAAMG,CACV,CACA,GAAI,CAACC,EACD,MAAMD,EAEV,OAAIC,EAAU,QAAU,mBACpBA,EAAU,MAAQ,iBAEtBC,EAAYD,CAAS,EACdA,CACX,CAEA,IAAME,EAAkB,CAAE,MAAO,gBAAiB,MAAO,eAAgB,EAInEC,EAAiB,aAAa,QAAQ,OAAO,EAC/CC,EAAiB,aAAa,QAAQ,OAAO,EACjD,GAAID,GAAkBC,EAAgB,CAClC,IAAIC,EAAcH,EAClB,OAAIC,IACAE,EAAcC,EAAAC,EAAA,GAAKF,GAAL,CAAkB,MAAOF,CAAe,GACtD,OAAO,aAAa,WAAW,OAAO,GAEtCC,IACAA,EAAiBA,IAAmB,iBAAmB,gBAAkBA,EACzEC,EAAcC,EAAAC,EAAA,GAAKF,GAAL,CAAkB,MAAOD,CAAe,GACtD,OAAO,aAAa,WAAW,OAAO,GAE1CH,EAAYI,CAAW,EAChBA,CACX,KACI,QAAAJ,EAAYC,CAAe,EACpBA,CAEf,CAEO,SAASD,EAAYO,EAAkC,CAC1D,aAAa,QAAQ,yBAA0B,KAAK,UAAUA,CAAQ,CAAC,CAC3E",
  "names": ["fetchUserDetails", "username", "__async", "response", "resp", "getUser", "oldStoredUser", "newUser", "setUser", "e", "getSettings", "storedSettings", "useSavedSettings", "returning", "setSettings", "defaultSettings", "oldStoredTheme", "oldStoredSound", "newSettings", "__spreadProps", "__spreadValues", "newTheme"]
}
